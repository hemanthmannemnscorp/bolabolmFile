sap.ui.define(["sap/ui/core/mvc/Controller","sap/m/Dialog","sap/m/DialogType","sap/m/Button","sap/m/ButtonType","sap/m/Label","sap/m/MessageToast","sap/m/Text","sap/m/HBox"],function(e,t,o,s,i,a,n,l,r){"use strict";return e.extend("com.bolam.zptv_bolam_approval.controller.ApprovalHome",{onInit:function(){this.onReadTable()},onReadTable:function(){var e=this.getView().byId("idFileApprovalTable");var t=this.getView().getModel("fileListModel");var o=this.getView().getModel("oFileMainModelJSON");t.read("/FileReqSet",{success:function(t){var s=t.results;o.setData(s);e.setModel(o)}})},onFilesSubmitReq:function(){var e=this.getView().byId("idFileApprovalTable").getModel().getData();var n=0;var l=0;this._oData=e;for(var p=0;p<e.length;p++){if(e[p].Approve==true){n=n+1}if(e[p].Deny==true){l=l+1}}this.oApproveDialog=new t({type:o.Message,title:"Save & Submit Information?",content:[new r({items:[new a({text:"You are about to submit:"})]}),new r({items:[new a({text:n+" Approved Files"}).addStyleClass("bulletlist")]}),new r({items:[new a({text:l+" Denied Files"}).addStyleClass("bulletlist")]}),new r({items:[new a({text:""})]}),new r({items:[new a({text:"Are you sure you would like to save and submit the information "})]}),new r({items:[new a({text:"from this session?"})]})],beginButton:new s({type:i.Emphasized,text:"Yes",press:function(){this.onApproveYesPress();this.oApproveDialog.close()}.bind(this)}),endButton:new s({text:"Cancel",press:function(){this.oApproveDialog.close()}.bind(this)})});this.oApproveDialog.open()},onApproveYesPress:function(){var e=this._oData;var t=[];for(var o=0;o<e.length;o++){var s=new Date;var i="PT"+s.getHours()+"H"+s.getMinutes()+"M"+s.getSeconds()+"S";var a={File:e[o].File,Count:e[o].Count,Date:e[o].Date,Time:e[o].Time,Approve:e[o].Approve,Deny:e[o].Deny,Notes:e[o].Notes,Pernr:"",Dateap:s,Timeap:i,Type:e[o].Type};t.push(a)}var n={File:"NSC_6_US_BOLA_653810_NS TRVL_20210408_171836.txt",Count:6,Date:"/Date(1617840000000)/",Time:"PT17H18M46S",Approve:false,Deny:false,Notes:"",Type:"BOLA",ReqToPostNav:t};var l=this.getView().getModel("fileListModel");var r=this;l.create("/FileReqSet",n,{success:function(){r.onReadTable()},error:function(){r.onReadTable()}})}})});